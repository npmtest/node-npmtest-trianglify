<!doctype html>
<html lang="en">
<head>
    <title>Code coverage report for node-npmtest-trianglify/node_modules/trianglify/lib/trianglify.js</title>
    <meta charset="utf-8">
    <style>
        body, html {
            margin:0; padding: 0;
        }
        body {
            font-family: Arial, Helvetica;
            font-size: 10pt;
        }
        div.header, div.footer {
            background: #eee;
            padding: 1em;
        }
        div.header {
            height: 160px;
            padding: 0 1em 0 1em;
            z-index: 100;
            position: fixed;
            top: 0;
            border-bottom: 1px solid #666;
            width: 100%;
        }
        div.footer {
            border-top: 1px solid #666;
        }
        div.body {
            margin-top: 170px;
        }
        div.meta {
            font-size: 90%;
            text-align: center;
        }
        h1, h2, h3 {
            font-weight: normal;
        }
        h1 {
            font-size: 12pt;
        }
        h2 {
            font-size: 10pt;
        }
        pre {
            font-family: Menlo, Monaco, Consolas, Courier New, monospace;
            margin: 0;
            padding: 0;
            font-size: 14px;
            tab-size: 2;
        }

        div.path { font-size: 110%; }
        div.path a:link, div.path a:visited { color: #000; }
        table.coverage { border-collapse: collapse; margin:0; padding: 0 }

        table.coverage td {
            margin: 0;
            padding: 0;
            color: #111;
            vertical-align: top;
        }
        table.coverage td.line-count {
            width: 50px;
            text-align: right;
            padding-right: 5px;
        }
        table.coverage td.line-coverage {
            color: #777 !important;
            text-align: right;
            border-left: 1px solid #666;
            border-right: 1px solid #666;
        }

        table.coverage td.text {
        }

        table.coverage td span.cline-any {
            display: inline-block;
            padding: 0 5px;
            width: 40px;
        }
        table.coverage td span.cline-neutral {
            background: #eee;
        }
        table.coverage td span.cline-yes {
            background: #b5d592;
            color: #999;
        }
        table.coverage td span.cline-no {
            background: #fc8c84;
        }

        .cstat-yes { color: #111; }
        .cstat-no { background: #fc8c84; color: #111; }
        .fstat-no { background: #ffc520; color: #111 !important; }
        .cbranch-no { background:  yellow !important; color: #111; }

        .cstat-skip { background: #ddd; color: #111; }
        .fstat-skip { background: #ddd; color: #111 !important; }
        .cbranch-skip { background: #ddd !important; color: #111; }

        .missing-if-branch {
            display: inline-block;
            margin-right: 10px;
            position: relative;
            padding: 0 4px;
            background: black;
            color: yellow;
        }

        .skip-if-branch {
            display: none;
            margin-right: 10px;
            position: relative;
            padding: 0 4px;
            background: #ccc;
            color: white;
        }

        .missing-if-branch .typ, .skip-if-branch .typ {
            color: inherit !important;
        }

        .entity, .metric { font-weight: bold; }
        .metric { display: inline-block; border: 1px solid #333; padding: 0.3em; background: white; }
        .metric small { font-size: 80%; font-weight: normal; color: #666; }

        div.coverage-summary table { border-collapse: collapse; margin: 3em; font-size: 110%; }
        div.coverage-summary td, div.coverage-summary table  th { margin: 0; padding: 0.25em 1em; border-top: 1px solid #666; border-bottom: 1px solid #666; }
        div.coverage-summary th { text-align: left; border: 1px solid #666; background: #eee; font-weight: normal; }
        div.coverage-summary th.file { border-right: none !important; }
        div.coverage-summary th.pic { border-left: none !important; text-align: right; }
        div.coverage-summary th.pct { border-right: none !important; }
        div.coverage-summary th.abs { border-left: none !important; text-align: right; }
        div.coverage-summary td.pct { text-align: right; border-left: 1px solid #666; }
        div.coverage-summary td.abs { text-align: right; font-size: 90%; color: #444; border-right: 1px solid #666; }
        div.coverage-summary td.file { text-align: right; border-left: 1px solid #666; white-space: nowrap;  }
        div.coverage-summary td.pic { min-width: 120px !important;  }
        div.coverage-summary a:link { color: #000; }
        div.coverage-summary a:visited { color: #333; }
        div.coverage-summary tfoot td { border-top: 1px solid #666; }

        div.coverage-summary .yui3-datatable-sort-indicator, div.coverage-summary .dummy-sort-indicator {
            height: 10px;
            width: 7px;
            display: inline-block;
            margin-left: 0.5em;
        }
        div.coverage-summary .yui3-datatable-sort-indicator {
            background: no-repeat scroll 0 0 transparent;
        }
        div.coverage-summary .yui3-datatable-sorted .yui3-datatable-sort-indicator {
            background-position: 0 -20px;
        }
        div.coverage-summary .yui3-datatable-sorted-desc .yui3-datatable-sort-indicator {
            background-position: 0 -10px;
        }

        .high { background: #b5d592 !important; }
        .medium { background: #ffe87c !important; }
        .low { background: #fc8c84 !important; }

        span.cover-fill, span.cover-empty {
            display:inline-block;
            border:1px solid #444;
            background: white;
            height: 12px;
        }
        span.cover-fill {
            background: #ccc;
            border-right: 1px solid #444;
        }
        span.cover-empty {
            background: white;
            border-left: none;
        }
        span.cover-full {
            border-right: none !important;
        }
        pre.prettyprint {
            border: none !important;
            padding: 0 !important;
            margin: 0 !important;
        }
        .com { color: #999 !important; }
        .ignore-none { color: #999; font-weight: normal; }

    </style>
</head>
<body>
<div class="header low">
    <h1 style="font-weight: bold;">
        <a href="https://github.com/npmtest/node-npmtest-trianglify">npmtest-trianglify (v0.0.1)</a>
    </h1>
    <h1>Code coverage report for <span class="entity">node-npmtest-trianglify/node_modules/trianglify/lib/trianglify.js</span></h1>
    <h2>
        
        Statements: <span class="metric">20.83% <small>(15 / 72)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        
        Branches: <span class="metric">0% <small>(0 / 20)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        
        Functions: <span class="metric">0% <small>(0 / 10)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        
        Lines: <span class="metric">22.06% <small>(15 / 68)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        Ignored: <span class="metric"><span class="ignore-none">none</span></span> &nbsp;&nbsp;&nbsp;&nbsp;
    </h2>
    <div class="path"><a href="../../../../index.html">All files</a> &#187; <a href="index.html">node-npmtest-trianglify/node_modules/trianglify/lib/</a> &#187; trianglify.js</div>
</div>
<div class="body">
<pre><table class="coverage">
<tr><td class="line-count">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174</td><td class="line-coverage"><span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span></td><td class="text"><pre class="prettyprint lang-js">/*
 * Trianglify.js
 * by @qrohlf
 *
 * Licensed under the GPLv3
 */
&nbsp;
var delaunay = require('delaunay-fast');
var seedrandom = require('seedrandom');
var chroma = require('chroma-js'); //PROBLEM: chroma.js is nearly 32k in size
var colorbrewer = require('./colorbrewer'); //We could use the chroma.js colorbrewer, but it's got some ugly stuff so we use our own subset.
var _generate_points = require('./points');
&nbsp;
var Pattern = require('./pattern');
&nbsp;
var defaults = {
  width: 600,                       // Width of pattern
  height: 400,                      // Height of pattern
  cell_size: 75,                    // Size of the cells used to generate a randomized grid
  variance: 0.75,                   // how much to randomize the grid
  seed: null,                       // Seed for the RNG
  x_colors: 'random',               // X color stops
  y_colors: 'match_x',              // Y color stops
  palette: colorbrewer,             // Palette to use for 'random' color option
  color_space: 'lab',               // Color space used for gradient construction &amp; interpolation
  color_function: null,             // Color function f(x, y) that returns a color specification that is consumable by chroma-js
  stroke_width: 1.51,               // Width of stroke. Defaults to 1.51 to fix an issue with canvas antialiasing.
  points: undefined                 // An Array of [x,y] coordinates to trianglulate. Defaults to undefined, and points are generated.
};
&nbsp;
/*********************************************************
*
* Main function that is exported to the global namespace
*
**********************************************************/
&nbsp;
<span class="fstat-no" title="function not covered" >function Trianglify(opts) {</span>
<span class="cstat-no" title="statement not covered" >  var rand;</span>
  
  // apply defaults
<span class="cstat-no" title="statement not covered" >  opts = _merge_opts(defaults, opts);</span>
&nbsp;
  // setup seedable RNG
<span class="cstat-no" title="statement not covered" >  rand = seedrandom(opts.seed);</span>
&nbsp;
  // randomize colors if requested
<span class="cstat-no" title="statement not covered" >  if (opts.x_colors === 'random') <span class="cstat-no" title="statement not covered" >opts.x_colors = _random_from_palette();</span></span>
<span class="cstat-no" title="statement not covered" >  if (opts.y_colors === 'random') <span class="cstat-no" title="statement not covered" >opts.y_colors = _random_from_palette();</span></span>
<span class="cstat-no" title="statement not covered" >  if (opts.y_colors === 'match_x') <span class="cstat-no" title="statement not covered" >opts.y_colors = opts.x_colors;</span></span>
&nbsp;
  // some sanity-checking
<span class="cstat-no" title="statement not covered" >  if (!(opts.width &gt; 0 &amp;&amp; opts.height &gt; 0)) {</span>
<span class="cstat-no" title="statement not covered" >    throw new Error("Width and height must be numbers greater than 0");</span>
  }
&nbsp;
<span class="cstat-no" title="statement not covered" >  if (opts.cell_size &lt; 2) {</span>
<span class="cstat-no" title="statement not covered" >    throw new Error("Cell size must be greater than 2.");</span>
  }
&nbsp;
  // Setup the color gradient function
<span class="cstat-no" title="statement not covered" >  var gradient;</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >  if (opts.color_function) {</span>
<span class="cstat-no" title="statement not covered" >    gradient = <span class="fstat-no" title="function not covered" >function(x, y) {</span></span>
<span class="cstat-no" title="statement not covered" >      return chroma(opts.color_function(x, y));</span>
    };
  } else {
<span class="cstat-no" title="statement not covered" >    var x_color = chroma.scale(opts.x_colors).mode(opts.color_space);</span>
<span class="cstat-no" title="statement not covered" >    var y_color = chroma.scale(opts.y_colors).mode(opts.color_space);</span>
<span class="cstat-no" title="statement not covered" >    gradient = <span class="fstat-no" title="function not covered" >function(x, y) {</span></span>
<span class="cstat-no" title="statement not covered" >      return chroma.interpolate(x_color(x), y_color(y), 0.5, opts.color_space);</span>
    };
  }
&nbsp;
  // Figure out key dimensions
&nbsp;
  // it's a pain to prefix width and height with opts all the time, so let's
  // give them proper variables to refer to
<span class="cstat-no" title="statement not covered" >  var width = opts.width;</span>
<span class="cstat-no" title="statement not covered" >  var height = opts.height;</span>
&nbsp;
  // How many cells we're going to have on each axis (pad by 2 cells on each edge)
<span class="cstat-no" title="statement not covered" >  var cells_x = Math.floor((width + 4 * opts.cell_size) / opts.cell_size);</span>
<span class="cstat-no" title="statement not covered" >  var cells_y = Math.floor((height + 4 * opts.cell_size) / opts.cell_size);</span>
&nbsp;
  // figure out the bleed widths to center the grid
<span class="cstat-no" title="statement not covered" >  var bleed_x = ((cells_x * opts.cell_size) - width)/2;</span>
<span class="cstat-no" title="statement not covered" >  var bleed_y = ((cells_y * opts.cell_size) - height)/2;</span>
&nbsp;
  // how much can out points wiggle (+/-) given the cell padding?
<span class="cstat-no" title="statement not covered" >  var variance = opts.cell_size * opts.variance / 2;</span>
&nbsp;
  // Set up normalizers
<span class="cstat-no" title="statement not covered" >  var norm_x = <span class="fstat-no" title="function not covered" >function(x) {</span></span>
<span class="cstat-no" title="statement not covered" >    return _map(x, [-bleed_x, width+bleed_x], [0, 1]);</span>
  };
&nbsp;
<span class="cstat-no" title="statement not covered" >  var norm_y = <span class="fstat-no" title="function not covered" >function(y) {</span></span>
<span class="cstat-no" title="statement not covered" >    return _map(y, [-bleed_y, height+bleed_y], [0, 1]);</span>
  };
&nbsp;
  // generate a point mesh
<span class="cstat-no" title="statement not covered" >  var points = opts.points || _generate_points(width, height, bleed_x, bleed_y, opts.cell_size, variance, rand);</span>
&nbsp;
  // delaunay.triangulate gives us indices into the original coordinate array
<span class="cstat-no" title="statement not covered" >  var geom_indices = delaunay.triangulate(points);</span>
&nbsp;
  // iterate over the indices in groups of three to flatten them into polygons, with color lookup
<span class="cstat-no" title="statement not covered" >  var triangles = [];</span>
<span class="cstat-no" title="statement not covered" >  var lookup_point = <span class="fstat-no" title="function not covered" >function(i) {</span> <span class="cstat-no" title="statement not covered" >return points[i];}</span>;</span>
<span class="cstat-no" title="statement not covered" >  for (var i=0; i &lt; geom_indices.length; i += 3) {</span>
<span class="cstat-no" title="statement not covered" >    var vertices = [geom_indices[i], geom_indices[i+1], geom_indices[i+2]].map(lookup_point);</span>
<span class="cstat-no" title="statement not covered" >    var centroid = _centroid(vertices);</span>
<span class="cstat-no" title="statement not covered" >    var color = gradient(norm_x(centroid.x), norm_y(centroid.y)).hex();</span>
<span class="cstat-no" title="statement not covered" >    triangles.push([color, vertices]);</span>
  }
<span class="cstat-no" title="statement not covered" >  return Pattern(triangles, opts);</span>
&nbsp;
&nbsp;
  /*********************************************************
  *
  * Private functions
  *
  **********************************************************/
&nbsp;
<span class="fstat-no" title="function not covered" >  function _map(num, in_range, out_range ) {</span>
<span class="cstat-no" title="statement not covered" >    return ( num - in_range[0] ) * ( out_range[1] - out_range[0] ) / ( in_range[1] - in_range[0] ) + out_range[0];</span>
  }
&nbsp;
  //triangles only!
<span class="fstat-no" title="function not covered" >  function _centroid(d) {</span>
<span class="cstat-no" title="statement not covered" >    return {</span>
      x: (d[0][0] + d[1][0] + d[2][0])/3,
      y: (d[0][1] + d[1][1] + d[2][1])/3
    };
  }
&nbsp;
  // select a random palette from colorbrewer
<span class="fstat-no" title="function not covered" >  function _random_from_palette() {</span>
<span class="cstat-no" title="statement not covered" >    if (opts.palette instanceof Array) {</span>
<span class="cstat-no" title="statement not covered" >      return opts.palette[Math.floor(rand()*opts.palette.length)];</span>
    }
&nbsp;
<span class="cstat-no" title="statement not covered" >    var keys = Object.keys(opts.palette);</span>
<span class="cstat-no" title="statement not covered" >    return opts.palette[keys[Math.floor(rand()*keys.length)]];</span>
  }
&nbsp;
  // shallow extend (sort of) for option defaults
<span class="fstat-no" title="function not covered" >  function _merge_opts(defaults, options) {</span>
<span class="cstat-no" title="statement not covered" >    var out = {};</span>
&nbsp;
    // shallow-copy defaults so we don't mutate the input objects (bad)
<span class="cstat-no" title="statement not covered" >    for (var key in defaults) {</span>
<span class="cstat-no" title="statement not covered" >      out[key] = defaults[key];</span>
    }
&nbsp;
<span class="cstat-no" title="statement not covered" >    for (key in options) {</span>
<span class="cstat-no" title="statement not covered" >      if (defaults.hasOwnProperty(key)) {</span>
<span class="cstat-no" title="statement not covered" >        out[key] = options[key]; </span>// override defaults with options
      } else {
<span class="cstat-no" title="statement not covered" >        throw new Error(key+" is not a configuration option for Trianglify. Check your spelling?");</span>
      }
    }
<span class="cstat-no" title="statement not covered" >    return out;</span>
  }
&nbsp;
} //end of Trianglify function closure
&nbsp;
// exports
Trianglify.colorbrewer = colorbrewer;
Trianglify.defaults = defaults;
module.exports = Trianglify;
&nbsp;
&nbsp;</pre></td></tr>
</table></pre>
</div>
<div class="footer">
    <div class="meta">Generated by <a href="https://github.com/kaizhu256/node-utility2" target="_blank">utility2</a> at Thu Apr 20 2017 11:43:11 GMT+0000 (UTC)</div>
</div>
</body>
</html>
